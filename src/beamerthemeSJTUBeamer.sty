%% beamerthemeSJTUBeamer.sty
%% Copyright 2021 Log Creative
%% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
% https://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status ‘maintained’.
%
% The Current Maintainer of this work is Log Creative.
%

\mode<all>

\DeclareOptionBeamer{navigation}{
    \PassOptionsToPackage{navigation=#1}{beamerouterthemeSJTUBeamer}
}
\DeclareOptionBeamer{lang}{
    \def\beamer@SJTUBeamer@lang{#1}
    \PassOptionsToPackage{lang=#1}{beamerouterthemeSJTUBeamer}
    \PassOptionsToPackage{lang=#1}{beamerinnerthemeSJTUBeamer}
}
\def\beamer@SJTUBeamer@langcn{cn}%
\def\beamer@SJTUBeamer@langen{en}%

\DeclareOptionBeamer{cjk}{\def\beamer@SJTUBeamer@cjk{#1}}
\def\beamer@SJTUBeamer@cjktrue{true}%
\def\beamer@SJTUBeamer@cjkfalse{false}%

\DeclareOptionBeamer{color}{
    \PassOptionsToPackage{color=#1}{beamercolorthemeSJTUBeamer}
}

\DeclareOptionBeamer{pattern}{
    \PassOptionsToPackage{pattern=#1}{beamerouterthemeSJTUBeamer}
    \PassOptionsToPackage{pattern=#1}{beamerinnerthemeSJTUBeamer}
}

\DeclareOptionBeamer{biber}{\def\beamer@SJTUBeamer@biber{#1}}
\def\beamer@SJTUBeamer@bibertrue{true}%
\def\beamer@SJTUBeamer@biberfalse{false}%

\ExecuteOptionsBeamer{
    navigation=tools,
    cjk=false,
    lang=cn,
    color=blue,
    pattern=title,
    biber=true,
}
\ProcessOptionsBeamer

\RequirePackage{silence}
\ifx\beamer@SJTUBeamer@biber\beamer@SJTUBeamer@bibertrue%
    \usepackage[style=authortitle-comp]{biblatex}
    \def\cite#1{
        \footcite{#1}
    }
\else%
    \usepackage[style=authortitle-comp,backend=bibtex]{biblatex}
\fi%
\def\Hy@WarnOptionDisabled#1{
    \def\next{#1}%
    \ifx\beamer@SJTUBeamer@cjk\beamer@SJTUBeamer@cjktrue%
        \def\ignore{pdfauthor}%
    \else%
        \def\ignore{driverfallback}%
    \fi%
    \ifx\next\ignore%
    \else\Hy@Warning{%
        Option `#1' has already been used,\MessageBreak 
        setting the option has no effect%
    }\fi
}
\ifx\beamer@SJTUBeamer@lang\beamer@SJTUBeamer@langen%
\else
    \ifx\beamer@SJTUBeamer@cjk\beamer@SJTUBeamer@cjktrue%
        \RequirePackage{CJKutf8}
        \renewcommand{\figurename}{图}
        \renewcommand{\tablename}{表}
        \renewcommand{\contentsname}{目录}
    \else%
        \RequirePackage[UTF8]{ctex}
    \fi%
\fi
\hypersetup{unicode}
\RequirePackage{bookmark}
\WarningFilter{latexfont}{Font shape}

\mode<presentation>
\beamer@compresstrue
\usecolortheme{SJTUBeamer}
\usefonttheme{SJTUBeamer}
\useinnertheme{SJTUBeamer}
\useoutertheme{SJTUBeamer}